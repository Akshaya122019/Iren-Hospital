<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Form Integration</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card p-4 border-0 shadow">
                    <form id="whatsappForm">
                        <div class="form-group p-3">
                            <input type="text" class="form-control border-0 shadow-sm rounded-end-3 py-2" id="car-name"
                                placeholder="Name" required>
                        </div>
                        <div class="form-group p-3">
                            <input type="email" class="form-control border-0 shadow-sm rounded-end-3 py-2" id="car-email"
                                placeholder="Email" required>
                        </div>
                        <div class="form-group p-3">
                            <input type="number" class="form-control border-0 shadow-sm rounded-end-3 py-2" id="car-age"
                                placeholder="Age" min="18" max="65" required>
                        </div>
                        <div class="form-group p-3">
                            <input type="tel" class="form-control border-0 shadow-sm rounded-end-3 py-2" id="car-phone"
                                placeholder="Phone No" required>
                        </div>
                        <div class="form-group p-3">
                            <input type="file" class="form-control border-0 shadow-sm rounded-end-3 py-2" id="car-file"
                                accept=".pdf,.doc,.docx">
                            <small class="text-danger fw-bold">*Only support pdf and doc</small>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success btn-lg fw-bold py-3 rounded-3 shadow-sm"
                                style="background: linear-gradient(135deg, #25d366 0%, #128c7e 100%); border: none;">
                                <i class="fab fa-whatsapp me-2 fs-5"></i>
                                Send Application via WhatsApp
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('whatsappForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('car-name').value.trim();
            const email = document.getElementById('car-email').value.trim();
            const age = document.getElementById('car-age').value.trim();
            const phone = document.getElementById('car-phone').value.trim();
            const resumeFile = document.getElementById('car-file').files[0];
            
            // Validate required fields
            if (!name || !email || !age || !phone) {
                alert('Please fill in all required fields');
                
                // Highlight empty fields
                [name, email, age, phone].forEach((value, index) => {
                    const fieldIds = ['car-name', 'car-email', 'car-age', 'car-phone'];
                    const field = document.getElementById(fieldIds[index]);
                    if (!value) {
                        field.classList.add('border', 'border-danger');
                        setTimeout(() => field.classList.remove('border', 'border-danger'), 3000);
                    }
                });
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Create WhatsApp message
            let whatsappMessage = `*🏥 New Job Application*%0A%0A`;
            whatsappMessage += `👤 *Name:* ${name}%0A`;
            whatsappMessage += `📧 *Email:* ${email}%0A`;
            whatsappMessage += `🎂 *Age:* ${age} years%0A`;
            whatsappMessage += `📱 *Phone:* ${phone}%0A`;
            
            if (resumeFile) {
                whatsappMessage += `📄 *Resume:* ${resumeFile.name}%0A`;
            } else {
                whatsappMessage += `📄 *Resume:* Not uploaded%0A`;
            }
            
            whatsappMessage += `%0A⏰ *Submitted:* ${new Date().toLocaleString()}%0A`;
            whatsappMessage += `%0A_Application submitted from website_`;
            
            // Replace with your actual WhatsApp number (include country code, no + sign)
            // Example: For +91 9876543210, use '919876543210'
            const whatsappNumber = '1234567890'; // 🔥 REPLACE THIS WITH YOUR ACTUAL NUMBER
            
            // Create WhatsApp URL
            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${whatsappMessage}`;
            
            // Show loading state
            const submitBtn = document.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Opening WhatsApp...';
            submitBtn.disabled = true;
            
            // Open WhatsApp after a short delay
            setTimeout(() => {
                window.open(whatsappURL, '_blank');
                
                // Show success message
                setTimeout(() => {
                    submitBtn.innerHTML = '<i class="fas fa-check me-2"></i>Message Sent!';
                    submitBtn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
                    
                    // Reset button and form after success
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.style.background = 'linear-gradient(135deg, #25d366 0%, #128c7e 100%)';
                        submitBtn.disabled = false;
                        
                        // Ask if user wants to reset form
                        if (confirm('Application sent successfully! Would you like to clear the form for another application?')) {
                            document.getElementById('whatsappForm').reset();
                        }
                    }, 2000);
                }, 1000);
            }, 500);
        });
        
        // File upload validation
        document.getElementById('car-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                const maxSize = 10 * 1024 * 1024; // 10MB
                
                if (!allowedTypes.includes(file.type)) {
                    alert('Please upload only PDF or DOC files');
                    this.value = '';
                    return;
                }
                
                if (file.size > maxSize) {
                    alert('File size should be less than 10MB');
                    this.value = '';
                    return;
                }
                
                // Show success feedback
                this.classList.add('border', 'border-success');
                setTimeout(() => this.classList.remove('border', 'border-success'), 2000);
            }
        });
        
        // Real-time validation feedback
        document.querySelectorAll('input[required]').forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value.trim()) {
                    this.classList.add('border', 'border-success');
                    setTimeout(() => this.classList.remove('border', 'border-success'), 1000);
                }
            });
        });
        
        // Email validation on typing
        document.getElementById('car-email').addEventListener('input', function() {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (this.value && !emailRegex.test(this.value)) {
                this.classList.add('border', 'border-warning');
            } else {
                this.classList.remove('border', 'border-warning');
            }
        });
    </script>
</body>
</html>